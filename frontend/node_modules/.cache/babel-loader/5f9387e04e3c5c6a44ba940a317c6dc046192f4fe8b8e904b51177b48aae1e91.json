{"ast":null,"code":"import _objectSpread from\"C:/Users/MovieRecommendations/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import{useNavigate}from'react-router-dom';import AdminNavbar from'../ui/AdminNavbar';import axios from'axios';import'../styles/admin/AdminUsers.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function AdminUsers(){const[users,setUsers]=useState([]);const navigate=useNavigate();useEffect(()=>{const memberId=localStorage.getItem('memberId');const token=localStorage.getItem('token');if(!memberId||memberId!=='1'||!token){alert('접근 권한이 없습니다.');navigate('/');}const fetchUsers=async()=>{try{const response=await axios.get('/member/users',{headers:{Authorization:\"Bearer \".concat(token)}});setUsers(response.data);}catch(error){console.error('사용자 정보를 가져오는 중 오류 발생:',error);alert('사용자 정보를 가져올 수 없습니다.');}};fetchUsers();},[navigate]);// 회원 정지 기능\nconst suspendMember=async memberId=>{const token=localStorage.getItem('token');if(window.confirm(\"\\uD68C\\uC6D0 ID \".concat(memberId,\"\\uB97C \\uC815\\uC9C0\\uD558\\uC2DC\\uACA0\\uC2B5\\uB2C8\\uAE4C?\"))){try{const response=await axios.put(\"/members/\".concat(memberId,\"/suspend\"),{},{headers:{Authorization:\"Bearer \".concat(token)}});alert(response.data||'회원이 성공적으로 정지되었습니다.');// 정지 후 사용자 상태 업데이트\nsetUsers(prevUsers=>prevUsers.map(user=>user.member.memberId===memberId?_objectSpread(_objectSpread({},user),{},{member:_objectSpread(_objectSpread({},user.member),{},{memberStatus:'SUSPENDED'})}):user));}catch(error){console.error('회원 정지 중 오류 발생:',error);alert('회원 정지에 실패했습니다.');}}};return/*#__PURE__*/_jsxs(\"div\",{className:\"admin-page\",children:[/*#__PURE__*/_jsx(AdminNavbar,{}),/*#__PURE__*/_jsxs(\"div\",{className:\"admin-content\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"\\uD68C\\uC6D0 \\uAD00\\uB9AC\"}),/*#__PURE__*/_jsxs(\"table\",{children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"ID\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Member Name\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Nickname\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Role\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Member Status\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Action\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:users.map((user,index)=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:user.member.memberId}),/*#__PURE__*/_jsx(\"td\",{children:user.member.membername}),/*#__PURE__*/_jsx(\"td\",{children:user.member.nickname}),/*#__PURE__*/_jsx(\"td\",{children:user.member.role}),/*#__PURE__*/_jsx(\"td\",{children:user.member.memberStatus}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"button\",{className:\"action-button\",onClick:()=>suspendMember(user.member.memberId),children:\"\\uC815\\uC9C0\"})})]},index))})]})]})]});}export default AdminUsers;","map":{"version":3,"names":["React","useState","useEffect","useNavigate","AdminNavbar","axios","jsx","_jsx","jsxs","_jsxs","AdminUsers","users","setUsers","navigate","memberId","localStorage","getItem","token","alert","fetchUsers","response","get","headers","Authorization","concat","data","error","console","suspendMember","window","confirm","put","prevUsers","map","user","member","_objectSpread","memberStatus","className","children","index","membername","nickname","role","onClick"],"sources":["C:/Users/MovieRecommendations/frontend/src/components/admin/AdminUsers.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport AdminNavbar from '../ui/AdminNavbar';\r\nimport axios from 'axios';\r\nimport '../styles/admin/AdminUsers.css';\r\n\r\nfunction AdminUsers() {\r\n  const [users, setUsers] = useState([]);\r\n  const navigate = useNavigate();\r\n\r\n  useEffect(() => {\r\n    const memberId = localStorage.getItem('memberId');\r\n    const token = localStorage.getItem('token');\r\n\r\n    if (!memberId || memberId !== '1' || !token) {\r\n      alert('접근 권한이 없습니다.');\r\n      navigate('/');\r\n    }\r\n\r\n    const fetchUsers = async () => {\r\n      try {\r\n        const response = await axios.get('/member/users', {\r\n          headers: { Authorization: `Bearer ${token}` },\r\n        });\r\n        setUsers(response.data);\r\n      } catch (error) {\r\n        console.error('사용자 정보를 가져오는 중 오류 발생:', error);\r\n        alert('사용자 정보를 가져올 수 없습니다.');\r\n      }\r\n    };\r\n\r\n    fetchUsers();\r\n  }, [navigate]);\r\n\r\n  // 회원 정지 기능\r\n  const suspendMember = async (memberId) => {\r\n    const token = localStorage.getItem('token');\r\n    if (window.confirm(`회원 ID ${memberId}를 정지하시겠습니까?`)) {\r\n      try {\r\n        const response = await axios.put(\r\n          `/members/${memberId}/suspend`,\r\n          {},\r\n          {\r\n            headers: { Authorization: `Bearer ${token}` },\r\n          }\r\n        );\r\n        alert(response.data || '회원이 성공적으로 정지되었습니다.');\r\n\r\n        // 정지 후 사용자 상태 업데이트\r\n        setUsers((prevUsers) =>\r\n          prevUsers.map((user) =>\r\n            user.member.memberId === memberId\r\n              ? { ...user, member: { ...user.member, memberStatus: 'SUSPENDED' } }\r\n              : user\r\n          )\r\n        );\r\n      } catch (error) {\r\n        console.error('회원 정지 중 오류 발생:', error);\r\n        alert('회원 정지에 실패했습니다.');\r\n      }\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"admin-page\">\r\n      <AdminNavbar />\r\n      <div className=\"admin-content\">\r\n        <h1>회원 관리</h1>\r\n        <table>\r\n          <thead>\r\n            <tr>\r\n              <th>ID</th>\r\n              <th>Member Name</th>\r\n              <th>Nickname</th>\r\n              <th>Role</th>\r\n              <th>Member Status</th>\r\n              <th>Action</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {users.map((user, index) => (\r\n              <tr key={index}>\r\n                <td>{user.member.memberId}</td>\r\n                <td>{user.member.membername}</td>\r\n                <td>{user.member.nickname}</td>\r\n                <td>{user.member.role}</td>\r\n                <td>{user.member.memberStatus}</td>\r\n                <td>\r\n                  <button\r\n                    className=\"action-button\"\r\n                    onClick={() => suspendMember(user.member.memberId)}\r\n                  >\r\n                    정지\r\n                  </button>\r\n                </td>\r\n              </tr>\r\n            ))}\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default AdminUsers;\r\n"],"mappings":"2HAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,OAASC,WAAW,KAAQ,kBAAkB,CAC9C,MAAO,CAAAC,WAAW,KAAM,mBAAmB,CAC3C,MAAO,CAAAC,KAAK,KAAM,OAAO,CACzB,MAAO,gCAAgC,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAExC,QAAS,CAAAC,UAAUA,CAAA,CAAG,CACpB,KAAM,CAACC,KAAK,CAAEC,QAAQ,CAAC,CAAGX,QAAQ,CAAC,EAAE,CAAC,CACtC,KAAM,CAAAY,QAAQ,CAAGV,WAAW,CAAC,CAAC,CAE9BD,SAAS,CAAC,IAAM,CACd,KAAM,CAAAY,QAAQ,CAAGC,YAAY,CAACC,OAAO,CAAC,UAAU,CAAC,CACjD,KAAM,CAAAC,KAAK,CAAGF,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CAE3C,GAAI,CAACF,QAAQ,EAAIA,QAAQ,GAAK,GAAG,EAAI,CAACG,KAAK,CAAE,CAC3CC,KAAK,CAAC,cAAc,CAAC,CACrBL,QAAQ,CAAC,GAAG,CAAC,CACf,CAEA,KAAM,CAAAM,UAAU,CAAG,KAAAA,CAAA,GAAY,CAC7B,GAAI,CACF,KAAM,CAAAC,QAAQ,CAAG,KAAM,CAAAf,KAAK,CAACgB,GAAG,CAAC,eAAe,CAAE,CAChDC,OAAO,CAAE,CAAEC,aAAa,WAAAC,MAAA,CAAYP,KAAK,CAAG,CAC9C,CAAC,CAAC,CACFL,QAAQ,CAACQ,QAAQ,CAACK,IAAI,CAAC,CACzB,CAAE,MAAOC,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAAC,uBAAuB,CAAEA,KAAK,CAAC,CAC7CR,KAAK,CAAC,qBAAqB,CAAC,CAC9B,CACF,CAAC,CAEDC,UAAU,CAAC,CAAC,CACd,CAAC,CAAE,CAACN,QAAQ,CAAC,CAAC,CAEd;AACA,KAAM,CAAAe,aAAa,CAAG,KAAO,CAAAd,QAAQ,EAAK,CACxC,KAAM,CAAAG,KAAK,CAAGF,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CAC3C,GAAIa,MAAM,CAACC,OAAO,oBAAAN,MAAA,CAAUV,QAAQ,4DAAa,CAAC,CAAE,CAClD,GAAI,CACF,KAAM,CAAAM,QAAQ,CAAG,KAAM,CAAAf,KAAK,CAAC0B,GAAG,aAAAP,MAAA,CAClBV,QAAQ,aACpB,CAAC,CAAC,CACF,CACEQ,OAAO,CAAE,CAAEC,aAAa,WAAAC,MAAA,CAAYP,KAAK,CAAG,CAC9C,CACF,CAAC,CACDC,KAAK,CAACE,QAAQ,CAACK,IAAI,EAAI,oBAAoB,CAAC,CAE5C;AACAb,QAAQ,CAAEoB,SAAS,EACjBA,SAAS,CAACC,GAAG,CAAEC,IAAI,EACjBA,IAAI,CAACC,MAAM,CAACrB,QAAQ,GAAKA,QAAQ,CAAAsB,aAAA,CAAAA,aAAA,IACxBF,IAAI,MAAEC,MAAM,CAAAC,aAAA,CAAAA,aAAA,IAAOF,IAAI,CAACC,MAAM,MAAEE,YAAY,CAAE,WAAW,EAAE,GAChEH,IACN,CACF,CAAC,CACH,CAAE,MAAOR,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAAC,gBAAgB,CAAEA,KAAK,CAAC,CACtCR,KAAK,CAAC,gBAAgB,CAAC,CACzB,CACF,CACF,CAAC,CAED,mBACET,KAAA,QAAK6B,SAAS,CAAC,YAAY,CAAAC,QAAA,eACzBhC,IAAA,CAACH,WAAW,GAAE,CAAC,cACfK,KAAA,QAAK6B,SAAS,CAAC,eAAe,CAAAC,QAAA,eAC5BhC,IAAA,OAAAgC,QAAA,CAAI,2BAAK,CAAI,CAAC,cACd9B,KAAA,UAAA8B,QAAA,eACEhC,IAAA,UAAAgC,QAAA,cACE9B,KAAA,OAAA8B,QAAA,eACEhC,IAAA,OAAAgC,QAAA,CAAI,IAAE,CAAI,CAAC,cACXhC,IAAA,OAAAgC,QAAA,CAAI,aAAW,CAAI,CAAC,cACpBhC,IAAA,OAAAgC,QAAA,CAAI,UAAQ,CAAI,CAAC,cACjBhC,IAAA,OAAAgC,QAAA,CAAI,MAAI,CAAI,CAAC,cACbhC,IAAA,OAAAgC,QAAA,CAAI,eAAa,CAAI,CAAC,cACtBhC,IAAA,OAAAgC,QAAA,CAAI,QAAM,CAAI,CAAC,EACb,CAAC,CACA,CAAC,cACRhC,IAAA,UAAAgC,QAAA,CACG5B,KAAK,CAACsB,GAAG,CAAC,CAACC,IAAI,CAAEM,KAAK,gBACrB/B,KAAA,OAAA8B,QAAA,eACEhC,IAAA,OAAAgC,QAAA,CAAKL,IAAI,CAACC,MAAM,CAACrB,QAAQ,CAAK,CAAC,cAC/BP,IAAA,OAAAgC,QAAA,CAAKL,IAAI,CAACC,MAAM,CAACM,UAAU,CAAK,CAAC,cACjClC,IAAA,OAAAgC,QAAA,CAAKL,IAAI,CAACC,MAAM,CAACO,QAAQ,CAAK,CAAC,cAC/BnC,IAAA,OAAAgC,QAAA,CAAKL,IAAI,CAACC,MAAM,CAACQ,IAAI,CAAK,CAAC,cAC3BpC,IAAA,OAAAgC,QAAA,CAAKL,IAAI,CAACC,MAAM,CAACE,YAAY,CAAK,CAAC,cACnC9B,IAAA,OAAAgC,QAAA,cACEhC,IAAA,WACE+B,SAAS,CAAC,eAAe,CACzBM,OAAO,CAAEA,CAAA,GAAMhB,aAAa,CAACM,IAAI,CAACC,MAAM,CAACrB,QAAQ,CAAE,CAAAyB,QAAA,CACpD,cAED,CAAQ,CAAC,CACP,CAAC,GAbEC,KAcL,CACL,CAAC,CACG,CAAC,EACH,CAAC,EACL,CAAC,EACH,CAAC,CAEV,CAEA,cAAe,CAAA9B,UAAU","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}