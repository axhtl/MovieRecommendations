{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useNavigate}from'react-router-dom';import axios from'axios';import'../styles/Navbar.css';import{FiLogOut,FiSearch}from'react-icons/fi';import{FontAwesomeIcon}from'@fortawesome/react-fontawesome';import{faFilm}from'@fortawesome/free-solid-svg-icons';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function Navbar(){const[userId,setUserId]=useState(null);// userId 상태 관리\nconst[searchQuery,setSearchQuery]=useState('');const[accessToken,setAccessToken]=useState(null);// JWT 토큰 상태 관리\nconst navigate=useNavigate();// 로컬 스토리지에서 userId와 JWT 토큰 가져오기\nuseEffect(()=>{const storedUserId=localStorage.getItem('memberId');const storedAccessToken=localStorage.getItem('token');// JWT 토큰 가져오기\nsetUserId(storedUserId);setAccessToken(storedAccessToken);// 상태 업데이트\n},[]);const handleLogout=()=>{localStorage.removeItem('memberId');localStorage.removeItem('token');// JWT 토큰 삭제\nalert('로그아웃 되었습니다.');navigate('/');// 로그인 페이지로 이동\n};const handleSearch=async()=>{if(!searchQuery.trim()){alert('검색어를 입력해 주세요.');return;}try{const response=await axios.get('/api/movies/search',{params:{query:searchQuery,includeAdult:false,language:'ko',page:1},headers:{Authorization:\"Bearer \".concat(accessToken)// JWT 토큰 포함\n}});if(response.data&&response.data.results.length>0){const searchResults=response.data.results;navigate(\"/movie/search?results=\".concat(encodeURIComponent(JSON.stringify(searchResults)),\"&query=\").concat(encodeURIComponent(searchQuery)));}else{alert('검색 결과가 없습니다.');}}catch(error){console.error('검색 오류:',error);alert('검색 중 문제가 발생했습니다. 잠시 후 다시 시도해 주세요.');}};const handleKeyPress=e=>{if(e.key==='Enter'){handleSearch();}};const navigateTo=path=>{if(!accessToken){alert('로그인이 필요합니다.');return;}if(userId){navigate(path.replace(':userId',userId));}else{alert('로그인이 필요합니다.');}};return/*#__PURE__*/_jsx(\"nav\",{className:\"navbar\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"navbar-container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"logo\",children:/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:faFilm,size:\"2x\",alt:\"Movie Icon\"})}),/*#__PURE__*/_jsxs(\"ul\",{className:\"nav-links\",children:[/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"button\",{className:\"nav-link-button\",onClick:()=>navigateTo('/main/:userId'),children:\"Home\"})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"button\",{className:\"nav-link-button\",onClick:()=>navigateTo('/movie/view'),children:\"\\uCD5C\\uC2E0 \\uC601\\uD654\"})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"button\",{className:\"nav-link-button\",onClick:()=>{if(!accessToken){alert('로그인이 필요합니다.');return;}navigateTo('/api/ai/predict/:userId');},children:\"\\uC601\\uD654 \\uCD94\\uCC9C\"})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"button\",{className:\"nav-link-button\",onClick:()=>navigateTo('/my/:userId'),children:\"\\uB9C8\\uC774 \\uD398\\uC774\\uC9C0\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"search-bar\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"\\uC601\\uD654 \\uAC80\\uC0C9...\",value:searchQuery,onChange:e=>setSearchQuery(e.target.value),onKeyPress:handleKeyPress}),/*#__PURE__*/_jsx(\"button\",{onClick:handleSearch,className:\"search-button\",children:/*#__PURE__*/_jsx(FiSearch,{size:20})}),/*#__PURE__*/_jsx(\"button\",{className:\"logout-button\",onClick:handleLogout,children:/*#__PURE__*/_jsx(FiLogOut,{size:20})})]})]})});}export default Navbar;","map":{"version":3,"names":["React","useState","useEffect","useNavigate","axios","FiLogOut","FiSearch","FontAwesomeIcon","faFilm","jsx","_jsx","jsxs","_jsxs","Navbar","userId","setUserId","searchQuery","setSearchQuery","accessToken","setAccessToken","navigate","storedUserId","localStorage","getItem","storedAccessToken","handleLogout","removeItem","alert","handleSearch","trim","response","get","params","query","includeAdult","language","page","headers","Authorization","concat","data","results","length","searchResults","encodeURIComponent","JSON","stringify","error","console","handleKeyPress","e","key","navigateTo","path","replace","className","children","icon","size","alt","onClick","type","placeholder","value","onChange","target","onKeyPress"],"sources":["C:/Users/MovieRecommendations/frontend/src/components/ui/Navbar.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport axios from 'axios';\r\nimport '../styles/Navbar.css';\r\nimport { FiLogOut, FiSearch } from 'react-icons/fi';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { faFilm } from '@fortawesome/free-solid-svg-icons';\r\n\r\nfunction Navbar() {\r\n  const [userId, setUserId] = useState(null); // userId 상태 관리\r\n  const [searchQuery, setSearchQuery] = useState('');\r\n  const [accessToken, setAccessToken] = useState(null); // JWT 토큰 상태 관리\r\n  const navigate = useNavigate();\r\n\r\n  // 로컬 스토리지에서 userId와 JWT 토큰 가져오기\r\n  useEffect(() => {\r\n    const storedUserId = localStorage.getItem('memberId');\r\n    const storedAccessToken = localStorage.getItem('token'); // JWT 토큰 가져오기\r\n\r\n    setUserId(storedUserId);\r\n    setAccessToken(storedAccessToken); // 상태 업데이트\r\n  }, []);\r\n\r\n  const handleLogout = () => {\r\n    localStorage.removeItem('memberId');\r\n    localStorage.removeItem('token'); // JWT 토큰 삭제\r\n    alert('로그아웃 되었습니다.');\r\n    navigate('/'); // 로그인 페이지로 이동\r\n  };\r\n\r\n  const handleSearch = async () => {\r\n    if (!searchQuery.trim()) {\r\n      alert('검색어를 입력해 주세요.');\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const response = await axios.get('/api/movies/search', {\r\n        params: {\r\n          query: searchQuery,\r\n          includeAdult: false,\r\n          language: 'ko',\r\n          page: 1,\r\n        },\r\n        headers: {\r\n          Authorization: `Bearer ${accessToken}`, // JWT 토큰 포함\r\n        },\r\n      });\r\n\r\n      if (response.data && response.data.results.length > 0) {\r\n        const searchResults = response.data.results;\r\n        navigate(\r\n          `/movie/search?results=${encodeURIComponent(\r\n            JSON.stringify(searchResults)\r\n          )}&query=${encodeURIComponent(searchQuery)}`\r\n        );\r\n      } else {\r\n        alert('검색 결과가 없습니다.');\r\n      }\r\n    } catch (error) {\r\n      console.error('검색 오류:', error);\r\n      alert('검색 중 문제가 발생했습니다. 잠시 후 다시 시도해 주세요.');\r\n    }\r\n  };\r\n\r\n  const handleKeyPress = (e) => {\r\n    if (e.key === 'Enter') {\r\n      handleSearch();\r\n    }\r\n  };\r\n\r\n  const navigateTo = (path) => {\r\n    if (!accessToken) {\r\n      alert('로그인이 필요합니다.');\r\n      return;\r\n    }\r\n\r\n    if (userId) {\r\n      navigate(path.replace(':userId', userId));\r\n    } else {\r\n      alert('로그인이 필요합니다.');\r\n    }\r\n  };\r\n\r\n  return (\r\n    <nav className=\"navbar\">\r\n      <div className=\"navbar-container\">\r\n        <div className=\"logo\">\r\n          <FontAwesomeIcon icon={faFilm} size=\"2x\" alt=\"Movie Icon\" />\r\n        </div>\r\n        <ul className=\"nav-links\">\r\n          <li>\r\n            <button\r\n              className=\"nav-link-button\"\r\n              onClick={() => navigateTo('/main/:userId')}\r\n            >\r\n              Home\r\n            </button>\r\n          </li>\r\n          <li>\r\n            <button\r\n              className=\"nav-link-button\"\r\n              onClick={() => navigateTo('/movie/view')}\r\n            >\r\n              최신 영화\r\n            </button>\r\n          </li>\r\n          <li>\r\n            <button\r\n              className=\"nav-link-button\"\r\n              onClick={() => {\r\n                if (!accessToken) {\r\n                  alert('로그인이 필요합니다.');\r\n                  return;\r\n                }\r\n                navigateTo('/api/ai/predict/:userId');\r\n              }}\r\n            >\r\n              영화 추천\r\n            </button>\r\n          </li>\r\n          <li>\r\n            <button\r\n              className=\"nav-link-button\"\r\n              onClick={() => navigateTo('/my/:userId')}\r\n            >\r\n              마이 페이지\r\n            </button>\r\n          </li>\r\n        </ul>\r\n        <div className=\"search-bar\">\r\n          <input\r\n            type=\"text\"\r\n            placeholder=\"영화 검색...\"\r\n            value={searchQuery}\r\n            onChange={(e) => setSearchQuery(e.target.value)}\r\n            onKeyPress={handleKeyPress}\r\n          />\r\n          <button onClick={handleSearch} className=\"search-button\">\r\n            <FiSearch size={20} />\r\n          </button>\r\n          <button className=\"logout-button\" onClick={handleLogout}>\r\n            <FiLogOut size={20} />\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </nav>\r\n  );\r\n}\r\n\r\nexport default Navbar;\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,OAASC,WAAW,KAAQ,kBAAkB,CAC9C,MAAO,CAAAC,KAAK,KAAM,OAAO,CACzB,MAAO,sBAAsB,CAC7B,OAASC,QAAQ,CAAEC,QAAQ,KAAQ,gBAAgB,CACnD,OAASC,eAAe,KAAQ,gCAAgC,CAChE,OAASC,MAAM,KAAQ,mCAAmC,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAE3D,QAAS,CAAAC,MAAMA,CAAA,CAAG,CAChB,KAAM,CAACC,MAAM,CAAEC,SAAS,CAAC,CAAGd,QAAQ,CAAC,IAAI,CAAC,CAAE;AAC5C,KAAM,CAACe,WAAW,CAAEC,cAAc,CAAC,CAAGhB,QAAQ,CAAC,EAAE,CAAC,CAClD,KAAM,CAACiB,WAAW,CAAEC,cAAc,CAAC,CAAGlB,QAAQ,CAAC,IAAI,CAAC,CAAE;AACtD,KAAM,CAAAmB,QAAQ,CAAGjB,WAAW,CAAC,CAAC,CAE9B;AACAD,SAAS,CAAC,IAAM,CACd,KAAM,CAAAmB,YAAY,CAAGC,YAAY,CAACC,OAAO,CAAC,UAAU,CAAC,CACrD,KAAM,CAAAC,iBAAiB,CAAGF,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CAAE;AAEzDR,SAAS,CAACM,YAAY,CAAC,CACvBF,cAAc,CAACK,iBAAiB,CAAC,CAAE;AACrC,CAAC,CAAE,EAAE,CAAC,CAEN,KAAM,CAAAC,YAAY,CAAGA,CAAA,GAAM,CACzBH,YAAY,CAACI,UAAU,CAAC,UAAU,CAAC,CACnCJ,YAAY,CAACI,UAAU,CAAC,OAAO,CAAC,CAAE;AAClCC,KAAK,CAAC,aAAa,CAAC,CACpBP,QAAQ,CAAC,GAAG,CAAC,CAAE;AACjB,CAAC,CAED,KAAM,CAAAQ,YAAY,CAAG,KAAAA,CAAA,GAAY,CAC/B,GAAI,CAACZ,WAAW,CAACa,IAAI,CAAC,CAAC,CAAE,CACvBF,KAAK,CAAC,eAAe,CAAC,CACtB,OACF,CAEA,GAAI,CACF,KAAM,CAAAG,QAAQ,CAAG,KAAM,CAAA1B,KAAK,CAAC2B,GAAG,CAAC,oBAAoB,CAAE,CACrDC,MAAM,CAAE,CACNC,KAAK,CAAEjB,WAAW,CAClBkB,YAAY,CAAE,KAAK,CACnBC,QAAQ,CAAE,IAAI,CACdC,IAAI,CAAE,CACR,CAAC,CACDC,OAAO,CAAE,CACPC,aAAa,WAAAC,MAAA,CAAYrB,WAAW,CAAI;AAC1C,CACF,CAAC,CAAC,CAEF,GAAIY,QAAQ,CAACU,IAAI,EAAIV,QAAQ,CAACU,IAAI,CAACC,OAAO,CAACC,MAAM,CAAG,CAAC,CAAE,CACrD,KAAM,CAAAC,aAAa,CAAGb,QAAQ,CAACU,IAAI,CAACC,OAAO,CAC3CrB,QAAQ,0BAAAmB,MAAA,CACmBK,kBAAkB,CACzCC,IAAI,CAACC,SAAS,CAACH,aAAa,CAC9B,CAAC,YAAAJ,MAAA,CAAUK,kBAAkB,CAAC5B,WAAW,CAAC,CAC5C,CAAC,CACH,CAAC,IAAM,CACLW,KAAK,CAAC,cAAc,CAAC,CACvB,CACF,CAAE,MAAOoB,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAAC,QAAQ,CAAEA,KAAK,CAAC,CAC9BpB,KAAK,CAAC,mCAAmC,CAAC,CAC5C,CACF,CAAC,CAED,KAAM,CAAAsB,cAAc,CAAIC,CAAC,EAAK,CAC5B,GAAIA,CAAC,CAACC,GAAG,GAAK,OAAO,CAAE,CACrBvB,YAAY,CAAC,CAAC,CAChB,CACF,CAAC,CAED,KAAM,CAAAwB,UAAU,CAAIC,IAAI,EAAK,CAC3B,GAAI,CAACnC,WAAW,CAAE,CAChBS,KAAK,CAAC,aAAa,CAAC,CACpB,OACF,CAEA,GAAIb,MAAM,CAAE,CACVM,QAAQ,CAACiC,IAAI,CAACC,OAAO,CAAC,SAAS,CAAExC,MAAM,CAAC,CAAC,CAC3C,CAAC,IAAM,CACLa,KAAK,CAAC,aAAa,CAAC,CACtB,CACF,CAAC,CAED,mBACEjB,IAAA,QAAK6C,SAAS,CAAC,QAAQ,CAAAC,QAAA,cACrB5C,KAAA,QAAK2C,SAAS,CAAC,kBAAkB,CAAAC,QAAA,eAC/B9C,IAAA,QAAK6C,SAAS,CAAC,MAAM,CAAAC,QAAA,cACnB9C,IAAA,CAACH,eAAe,EAACkD,IAAI,CAAEjD,MAAO,CAACkD,IAAI,CAAC,IAAI,CAACC,GAAG,CAAC,YAAY,CAAE,CAAC,CACzD,CAAC,cACN/C,KAAA,OAAI2C,SAAS,CAAC,WAAW,CAAAC,QAAA,eACvB9C,IAAA,OAAA8C,QAAA,cACE9C,IAAA,WACE6C,SAAS,CAAC,iBAAiB,CAC3BK,OAAO,CAAEA,CAAA,GAAMR,UAAU,CAAC,eAAe,CAAE,CAAAI,QAAA,CAC5C,MAED,CAAQ,CAAC,CACP,CAAC,cACL9C,IAAA,OAAA8C,QAAA,cACE9C,IAAA,WACE6C,SAAS,CAAC,iBAAiB,CAC3BK,OAAO,CAAEA,CAAA,GAAMR,UAAU,CAAC,aAAa,CAAE,CAAAI,QAAA,CAC1C,2BAED,CAAQ,CAAC,CACP,CAAC,cACL9C,IAAA,OAAA8C,QAAA,cACE9C,IAAA,WACE6C,SAAS,CAAC,iBAAiB,CAC3BK,OAAO,CAAEA,CAAA,GAAM,CACb,GAAI,CAAC1C,WAAW,CAAE,CAChBS,KAAK,CAAC,aAAa,CAAC,CACpB,OACF,CACAyB,UAAU,CAAC,yBAAyB,CAAC,CACvC,CAAE,CAAAI,QAAA,CACH,2BAED,CAAQ,CAAC,CACP,CAAC,cACL9C,IAAA,OAAA8C,QAAA,cACE9C,IAAA,WACE6C,SAAS,CAAC,iBAAiB,CAC3BK,OAAO,CAAEA,CAAA,GAAMR,UAAU,CAAC,aAAa,CAAE,CAAAI,QAAA,CAC1C,iCAED,CAAQ,CAAC,CACP,CAAC,EACH,CAAC,cACL5C,KAAA,QAAK2C,SAAS,CAAC,YAAY,CAAAC,QAAA,eACzB9C,IAAA,UACEmD,IAAI,CAAC,MAAM,CACXC,WAAW,CAAC,8BAAU,CACtBC,KAAK,CAAE/C,WAAY,CACnBgD,QAAQ,CAAGd,CAAC,EAAKjC,cAAc,CAACiC,CAAC,CAACe,MAAM,CAACF,KAAK,CAAE,CAChDG,UAAU,CAAEjB,cAAe,CAC5B,CAAC,cACFvC,IAAA,WAAQkD,OAAO,CAAEhC,YAAa,CAAC2B,SAAS,CAAC,eAAe,CAAAC,QAAA,cACtD9C,IAAA,CAACJ,QAAQ,EAACoD,IAAI,CAAE,EAAG,CAAE,CAAC,CAChB,CAAC,cACThD,IAAA,WAAQ6C,SAAS,CAAC,eAAe,CAACK,OAAO,CAAEnC,YAAa,CAAA+B,QAAA,cACtD9C,IAAA,CAACL,QAAQ,EAACqD,IAAI,CAAE,EAAG,CAAE,CAAC,CAChB,CAAC,EACN,CAAC,EACH,CAAC,CACH,CAAC,CAEV,CAEA,cAAe,CAAA7C,MAAM","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}