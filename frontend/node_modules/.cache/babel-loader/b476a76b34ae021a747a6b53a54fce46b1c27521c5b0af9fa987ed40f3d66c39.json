{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useNavigate,useParams}from'react-router-dom';import Navbar from'../ui/Navbar';import RegiMovieList from'../list/RegiMovieList';import RecommendationCard from'../list/RecommendationCard';import'../styles/MainPage.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const MainPage=()=>{const{userId}=useParams();const[movies,setMovies]=useState([]);const[nickname,setNickname]=useState('');const navigate=useNavigate();useEffect(()=>{const fetchMovies=async()=>{const accessToken=localStorage.getItem('token');if(!userId||!accessToken){alert('로그인이 필요합니다. 로그인 페이지로 이동합니다.');navigate('/');return;}try{var _userData$member;const userResponse=await fetch(\"/member/user/\".concat(userId),{headers:{Authorization:\"Bearer \".concat(accessToken)}});if(!userResponse.ok){throw new Error('사용자 데이터 요청 실패');}const userData=await userResponse.json();setMovies(userData.reviewInfos||[]);setNickname(((_userData$member=userData.member)===null||_userData$member===void 0?void 0:_userData$member.nickname)||'');}catch(error){console.error('데이터를 불러오는 데 실패했습니다:',error.message);}};fetchMovies();},[userId,navigate]);const handleSearchClick=()=>{navigate('/movie/view');};const recommendations=[{title:'등록한 리뷰 기반 추천',description:'사용자가 입력한 리뷰 점수를 바탕으로 가장 적합한 영화를 추천합니다.',imageUrl:'/icons/image1.png'},{title:'설문조사 기반 추천',description:'설문조사를 통해 사용자의 취향을 분석하여 맞춤 영화를 추천합니다.',imageUrl:'/icons/image2.png'},{title:'LLM 기반 추천',description:'AI 챗봇과 대화를 통해 사용자에게 더 적합한 맞춤 영화를 추천합니다.',imageUrl:'/icons/image3.jpg'}];return/*#__PURE__*/_jsxs(\"div\",{className:\"main-page\",children:[/*#__PURE__*/_jsx(Navbar,{}),/*#__PURE__*/_jsx(\"div\",{className:\"main-content\",children:movies.length===0?/*#__PURE__*/_jsxs(\"div\",{className:\"no-movies\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"MOVIE PICK\"}),/*#__PURE__*/_jsxs(\"h4\",{children:[nickname,\" \\uB2D8\\uC744 \\uC704\\uD55C \\uC601\\uD654 \\uCD94\\uCC9C \\uD50C\\uB7AB\\uD3FC\"]}),/*#__PURE__*/_jsx(\"p\",{style:{whiteSpace:'pre-wrap'},children:\"\\uBB34\\uBE44\\uD53D\\uC740 \\uC0AC\\uC6A9\\uC790\\uC758 \\uC601\\uD654 \\uAE30\\uB85D \\uB370\\uC774\\uD130\\uB97C \\uAE30\\uBC18\\uC73C\\uB85C \\uD558\\uB294 \\uC601\\uD654 \\uCD94\\uCC9C AI \\uC6F9 \\uC11C\\uBE44\\uC2A4\\uC608\\uC694. \\uCD1D 3\\uAC00\\uC9C0 AI \\uC885\\uB958\\uB97C \\uC774\\uC6A9\\uD574 \\uC0AC\\uC6A9\\uC790 \\uB9DE\\uCDA4\\uD615 \\uC601\\uD654\\uB97C \\uCD94\\uCC9C\\uD574 \\uB4DC\\uB824\\uC694.\"}),/*#__PURE__*/_jsx(\"div\",{className:\"recommendation-list\",children:recommendations.map((item,index)=>/*#__PURE__*/_jsx(RecommendationCard,{title:item.title,description:item.description,imageUrl:item.imageUrl},index))}),/*#__PURE__*/_jsx(\"div\",{className:\"add-movie-section\",children:/*#__PURE__*/_jsxs(\"p\",{children:[nickname,\" \\uB2D8, \\uBC14\\uB85C \\uB4F1\\uB85D\\uD558\\uB7EC \\uAC00\\uBCFC\\uAE4C\\uC694?\"]})}),/*#__PURE__*/_jsx(\"div\",{className:\"add-movie-section\",children:/*#__PURE__*/_jsx(\"button\",{className:\"add-movie-button\",onClick:handleSearchClick,children:\"\\uC601\\uD654 \\uB4F1\\uB85D\\uD558\\uAE30\"})})]}):/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h2\",{children:[nickname,\" \\uB2D8\\uC774 \\uB4F1\\uB85D\\uD55C \\uC601\\uD654\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"movie-section\",children:/*#__PURE__*/_jsx(RegiMovieList,{movies:movies})})]})})]});};export default MainPage;","map":{"version":3,"names":["React","useState","useEffect","useNavigate","useParams","Navbar","RegiMovieList","RecommendationCard","jsx","_jsx","jsxs","_jsxs","MainPage","userId","movies","setMovies","nickname","setNickname","navigate","fetchMovies","accessToken","localStorage","getItem","alert","_userData$member","userResponse","fetch","concat","headers","Authorization","ok","Error","userData","json","reviewInfos","member","error","console","message","handleSearchClick","recommendations","title","description","imageUrl","className","children","length","style","whiteSpace","map","item","index","onClick"],"sources":["C:/Users/MovieRecommendations/frontend/src/components/page/MainPage.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useNavigate, useParams } from 'react-router-dom';\r\nimport Navbar from '../ui/Navbar';\r\nimport RegiMovieList from '../list/RegiMovieList';\r\nimport RecommendationCard from '../list/RecommendationCard';\r\nimport '../styles/MainPage.css';\r\n\r\nconst MainPage = () => {\r\n  const { userId } = useParams();\r\n  const [movies, setMovies] = useState([]);\r\n  const [nickname, setNickname] = useState('');\r\n  const navigate = useNavigate();\r\n\r\n  useEffect(() => {\r\n    const fetchMovies = async () => {\r\n      const accessToken = localStorage.getItem('token');\r\n\r\n      if (!userId || !accessToken) {\r\n        alert('로그인이 필요합니다. 로그인 페이지로 이동합니다.');\r\n        navigate('/');\r\n        return;\r\n      }\r\n\r\n      try {\r\n        const userResponse = await fetch(`/member/user/${userId}`, {\r\n          headers: {\r\n            Authorization: `Bearer ${accessToken}`,\r\n          },\r\n        });\r\n\r\n        if (!userResponse.ok) {\r\n          throw new Error('사용자 데이터 요청 실패');\r\n        }\r\n\r\n        const userData = await userResponse.json();\r\n        setMovies(userData.reviewInfos || []);\r\n        setNickname(userData.member?.nickname || '');\r\n      } catch (error) {\r\n        console.error('데이터를 불러오는 데 실패했습니다:', error.message);\r\n      }\r\n    };\r\n\r\n    fetchMovies();\r\n  }, [userId, navigate]);\r\n\r\n  const handleSearchClick = () => {\r\n    navigate('/movie/view');\r\n  };\r\n\r\n  const recommendations = [\r\n    {\r\n      title: '등록한 리뷰 기반 추천',\r\n      description: '사용자가 입력한 리뷰 점수를 바탕으로 가장 적합한 영화를 추천합니다.',\r\n      imageUrl: '/icons/image1.png',\r\n    },\r\n    {\r\n      title: '설문조사 기반 추천',\r\n      description: '설문조사를 통해 사용자의 취향을 분석하여 맞춤 영화를 추천합니다.',\r\n      imageUrl: '/icons/image2.png',\r\n    },\r\n    {\r\n      title: 'LLM 기반 추천',\r\n      description: 'AI 챗봇과 대화를 통해 사용자에게 더 적합한 맞춤 영화를 추천합니다.',\r\n      imageUrl: '/icons/image3.jpg',\r\n    },\r\n  ];\r\n\r\n  return (\r\n    <div className=\"main-page\">\r\n      <Navbar />\r\n      <div className=\"main-content\">\r\n        {movies.length === 0 ? (\r\n          <div className=\"no-movies\">\r\n            <h1>MOVIE PICK</h1>\r\n            <h4>{nickname} 님을 위한 영화 추천 플랫폼</h4>\r\n            <p style={{ whiteSpace: 'pre-wrap' }}>\r\n              무비픽은 사용자의 영화 기록 데이터를 기반으로 하는 영화 추천 AI 웹 서비스예요.\r\n              총 3가지 AI 종류를 이용해 사용자 맞춤형 영화를 추천해 드려요. \r\n            </p>\r\n            <div className=\"recommendation-list\">\r\n              {recommendations.map((item, index) => (\r\n                <RecommendationCard\r\n                  key={index}\r\n                  title={item.title}\r\n                  description={item.description}\r\n                  imageUrl={item.imageUrl}\r\n                />\r\n              ))}\r\n            </div>\r\n            <div className=\"add-movie-section\">\r\n              <p>{nickname} 님, 바로 등록하러 가볼까요?</p>\r\n            </div>\r\n            <div className=\"add-movie-section\">\r\n              <button className=\"add-movie-button\" onClick={handleSearchClick}>\r\n                영화 등록하기\r\n              </button>\r\n            </div>\r\n          </div>\r\n        ) : (\r\n          <div>\r\n            <h2>{nickname} 님이 등록한 영화</h2>\r\n            <div className=\"movie-section\">\r\n              <RegiMovieList movies={movies} />\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default MainPage;\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,OAASC,WAAW,CAAEC,SAAS,KAAQ,kBAAkB,CACzD,MAAO,CAAAC,MAAM,KAAM,cAAc,CACjC,MAAO,CAAAC,aAAa,KAAM,uBAAuB,CACjD,MAAO,CAAAC,kBAAkB,KAAM,4BAA4B,CAC3D,MAAO,wBAAwB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAEhC,KAAM,CAAAC,QAAQ,CAAGA,CAAA,GAAM,CACrB,KAAM,CAAEC,MAAO,CAAC,CAAGT,SAAS,CAAC,CAAC,CAC9B,KAAM,CAACU,MAAM,CAAEC,SAAS,CAAC,CAAGd,QAAQ,CAAC,EAAE,CAAC,CACxC,KAAM,CAACe,QAAQ,CAAEC,WAAW,CAAC,CAAGhB,QAAQ,CAAC,EAAE,CAAC,CAC5C,KAAM,CAAAiB,QAAQ,CAAGf,WAAW,CAAC,CAAC,CAE9BD,SAAS,CAAC,IAAM,CACd,KAAM,CAAAiB,WAAW,CAAG,KAAAA,CAAA,GAAY,CAC9B,KAAM,CAAAC,WAAW,CAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CAEjD,GAAI,CAACT,MAAM,EAAI,CAACO,WAAW,CAAE,CAC3BG,KAAK,CAAC,6BAA6B,CAAC,CACpCL,QAAQ,CAAC,GAAG,CAAC,CACb,OACF,CAEA,GAAI,KAAAM,gBAAA,CACF,KAAM,CAAAC,YAAY,CAAG,KAAM,CAAAC,KAAK,iBAAAC,MAAA,CAAiBd,MAAM,EAAI,CACzDe,OAAO,CAAE,CACPC,aAAa,WAAAF,MAAA,CAAYP,WAAW,CACtC,CACF,CAAC,CAAC,CAEF,GAAI,CAACK,YAAY,CAACK,EAAE,CAAE,CACpB,KAAM,IAAI,CAAAC,KAAK,CAAC,eAAe,CAAC,CAClC,CAEA,KAAM,CAAAC,QAAQ,CAAG,KAAM,CAAAP,YAAY,CAACQ,IAAI,CAAC,CAAC,CAC1ClB,SAAS,CAACiB,QAAQ,CAACE,WAAW,EAAI,EAAE,CAAC,CACrCjB,WAAW,CAAC,EAAAO,gBAAA,CAAAQ,QAAQ,CAACG,MAAM,UAAAX,gBAAA,iBAAfA,gBAAA,CAAiBR,QAAQ,GAAI,EAAE,CAAC,CAC9C,CAAE,MAAOoB,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAAC,qBAAqB,CAAEA,KAAK,CAACE,OAAO,CAAC,CACrD,CACF,CAAC,CAEDnB,WAAW,CAAC,CAAC,CACf,CAAC,CAAE,CAACN,MAAM,CAAEK,QAAQ,CAAC,CAAC,CAEtB,KAAM,CAAAqB,iBAAiB,CAAGA,CAAA,GAAM,CAC9BrB,QAAQ,CAAC,aAAa,CAAC,CACzB,CAAC,CAED,KAAM,CAAAsB,eAAe,CAAG,CACtB,CACEC,KAAK,CAAE,cAAc,CACrBC,WAAW,CAAE,wCAAwC,CACrDC,QAAQ,CAAE,mBACZ,CAAC,CACD,CACEF,KAAK,CAAE,YAAY,CACnBC,WAAW,CAAE,sCAAsC,CACnDC,QAAQ,CAAE,mBACZ,CAAC,CACD,CACEF,KAAK,CAAE,WAAW,CAClBC,WAAW,CAAE,yCAAyC,CACtDC,QAAQ,CAAE,mBACZ,CAAC,CACF,CAED,mBACEhC,KAAA,QAAKiC,SAAS,CAAC,WAAW,CAAAC,QAAA,eACxBpC,IAAA,CAACJ,MAAM,GAAE,CAAC,cACVI,IAAA,QAAKmC,SAAS,CAAC,cAAc,CAAAC,QAAA,CAC1B/B,MAAM,CAACgC,MAAM,GAAK,CAAC,cAClBnC,KAAA,QAAKiC,SAAS,CAAC,WAAW,CAAAC,QAAA,eACxBpC,IAAA,OAAAoC,QAAA,CAAI,YAAU,CAAI,CAAC,cACnBlC,KAAA,OAAAkC,QAAA,EAAK7B,QAAQ,CAAC,yEAAgB,EAAI,CAAC,cACnCP,IAAA,MAAGsC,KAAK,CAAE,CAAEC,UAAU,CAAE,UAAW,CAAE,CAAAH,QAAA,CAAC,8WAGtC,CAAG,CAAC,cACJpC,IAAA,QAAKmC,SAAS,CAAC,qBAAqB,CAAAC,QAAA,CACjCL,eAAe,CAACS,GAAG,CAAC,CAACC,IAAI,CAAEC,KAAK,gBAC/B1C,IAAA,CAACF,kBAAkB,EAEjBkC,KAAK,CAAES,IAAI,CAACT,KAAM,CAClBC,WAAW,CAAEQ,IAAI,CAACR,WAAY,CAC9BC,QAAQ,CAAEO,IAAI,CAACP,QAAS,EAHnBQ,KAIN,CACF,CAAC,CACC,CAAC,cACN1C,IAAA,QAAKmC,SAAS,CAAC,mBAAmB,CAAAC,QAAA,cAChClC,KAAA,MAAAkC,QAAA,EAAI7B,QAAQ,CAAC,0EAAiB,EAAG,CAAC,CAC/B,CAAC,cACNP,IAAA,QAAKmC,SAAS,CAAC,mBAAmB,CAAAC,QAAA,cAChCpC,IAAA,WAAQmC,SAAS,CAAC,kBAAkB,CAACQ,OAAO,CAAEb,iBAAkB,CAAAM,QAAA,CAAC,uCAEjE,CAAQ,CAAC,CACN,CAAC,EACH,CAAC,cAENlC,KAAA,QAAAkC,QAAA,eACElC,KAAA,OAAAkC,QAAA,EAAK7B,QAAQ,CAAC,+CAAU,EAAI,CAAC,cAC7BP,IAAA,QAAKmC,SAAS,CAAC,eAAe,CAAAC,QAAA,cAC5BpC,IAAA,CAACH,aAAa,EAACQ,MAAM,CAAEA,MAAO,CAAE,CAAC,CAC9B,CAAC,EACH,CACN,CACE,CAAC,EACH,CAAC,CAEV,CAAC,CAED,cAAe,CAAAF,QAAQ","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}